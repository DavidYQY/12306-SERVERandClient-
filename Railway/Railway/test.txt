select a.UserId,a.TrainId,a.Origin,a.Destination,b.StartTime,c.EndTime,b.CarType,b.Price 
from ticket as a, train as b, train as c 
where a.UserId='cherry' and a.TrainId==b.TrainId and b.TrainId=c.TrainId and a.Origin=b.Origin and a.Destination=c.Destination and a.StartTime=b.StartTime




/*查车*/
select a.trainid,a.Origin,b.Destination,a.StartTime,b.EndTime,a.CarType,(a.StationId<>0),
(select MAX(StationId) from Train where TrainId=a.TrainId)!=b.StationId
from train as a,train as b
where a.Starttime>'2016/09/09 00:00' and a.Starttime<'2016/09/10' 
and (select min(endtime) from train where trainid=a.TrainId and starttime>=a.StartTime and stationid=
(select MAX(StationId) from Train where TrainId=a.TrainId))>=b.EndTime
and a.trainid=b.trainid and a.origin like '上海%' and b.destination like '北京%' 
order by a.starttime asc


/*查某张票里程数*/
select sum(distinct a.Length)
from train as a, train as b, ticket as c
where a.StationId>=(select distinct StationId from train where TrainId=c.TrainId and StartTime=c.StartTime)
      and a.StationId<=(select distinct stationid from train where trainid=c.trainid and destination=c.destination)
      and a.TrainId=c.TrainId and c.TrainId='G8'
	  
send 7;-G14-上海虹桥-北京南-2016/10/01 10:00-2016/10/01 14:58-0-659-120-0-0-;-G16-上海虹桥-北京南-2016/10/01 11:00-2016/10/01 15:55-0-659-120-0-0-;-G4-上海虹桥-北京南-2016/10/01 14:00-2016/10/01 18:48-0-659-120-0-0-;-G18-上海虹桥-北京南-2016/10/01 15:00-2016/10/01 19:55-0-659-120-0-0-;-G20-上海虹桥-北京南-2016/10/01 16:00-2016/10/01 20:24-0-659-120-0-0-;-G22-上海虹桥-北京南-2016/10/01 17:00-2016/10/01 22:24-0-659-120-0-0-;-G8-上海虹桥-北京南-2016/10/01 19:00-2016/10/01 23:48-0-659-120-0-0-; to 1372